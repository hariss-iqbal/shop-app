<p-dialog
  header="Stock Alert Settings"
  [visible]="visible()"
  (visibleChange)="onVisibleChange($event)"
  (onShow)="onDialogShow()"
  (onHide)="onDialogHide()"
  [modal]="true"
  [closable]="true"
  [focusOnShow]="true"
  [focusTrap]="true"
  [closeOnEscape]="true"
  [style]="{ width: '450px' }"
  [breakpoints]="{ '575px': '95vw' }"
  role="dialog"
  aria-label="Stock Alert Settings"
>
  <div class="flex flex-column gap-4 pt-2">
    <div class="flex flex-column gap-2">
      <p-floatlabel variant="on">
        <p-inputNumber
          id="lowStockThreshold"
          [(ngModel)]="lowStockThreshold"
          [min]="0"
          [showButtons]="true"
          [step]="1"
          styleClass="w-full"
        />
        <label for="lowStockThreshold">Low Stock Threshold</label>
      </p-floatlabel>
      <small class="text-color-secondary">
        A warning alert will display when total available stock falls below this number.
      </small>
    </div>

    <div class="flex align-items-center justify-content-between gap-3 p-3 border-round surface-ground">
      <div class="flex flex-column gap-1">
        <span class="font-medium text-color">Brand Zero Stock Alert</span>
        <small class="text-color-secondary">
          Show an alert for each brand that has zero available stock.
        </small>
      </div>
      <p-toggleSwitch
        [(ngModel)]="enableBrandZeroAlert"
        inputId="enableBrandZeroAlert"
        ariaLabel="Enable brand zero stock alerts"
      />
    </div>

    <!-- F-008: Oversell Configuration -->
    <div class="flex align-items-center justify-content-between gap-3 p-3 border-round surface-ground">
      <div class="flex flex-column gap-1">
        <span class="font-medium text-color">Allow Overselling</span>
        <small class="text-color-secondary">
          When enabled, sales can proceed with a warning even if items are reserved or unavailable.
          When disabled, sales will be blocked if any item is not fully available.
        </small>
      </div>
      <p-toggleSwitch
        [(ngModel)]="allowOversell"
        inputId="allowOversell"
        ariaLabel="Allow overselling with warning"
      />
    </div>
  </div>

  <ng-template #footer>
    <div class="flex justify-content-end gap-2">
      <p-button
        label="Cancel"
        severity="secondary"
        [text]="true"
        (onClick)="onCancel()"
        ariaLabel="Cancel changes"
      />
      <p-button
        label="Save"
        icon="pi pi-check"
        (onClick)="onSave()"
        [loading]="saving()"
        ariaLabel="Save alert settings"
      />
    </div>
  </ng-template>
</p-dialog>
